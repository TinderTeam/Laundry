<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>
<div >
    <form id="customerForm" name="customerForm" method="post">
    	<table cellpadding="5">
    		<tr>
    			<td>会员账号:</td>
    			<td>
    				<input id="user_name" class="easyui-textbox" type="text" name="user_name" data-options="required:true"></input>
   				</td>
   				<td style="display:none">
   					<input id="user_id" class="easyui-textbox" type="text" name="user_id"></input>
   				</td>
   				<td>昵称:</td>
    			<td><input class="easyui-textbox" type="text" name="nickname"></input></td>
    		</tr>
    		<tr>
    			<td>真实姓名:</td>
    			<td><input class="easyui-textbox" type="text" name="customer_name"></input></td>
    			<td>生日:</td>
    			<td><input id="birthday" class="easyui-datebox" value="1990-01-01" type="text" name="birthday"></input></td>
    		</tr>
    		<tr>
    			<td>家庭住址:</td>
    			<td colspan="3"><input class="easyui-textbox" style="width:355px" type="text" name="addr"></input></td>
    		</tr>
    	</table>
    </form>
    </div>
    <div style="text-align:center;padding:5px">
    	<a class="easyui-linkbutton" onclick="submitForm()">Submit</a>
    	<a class="easyui-linkbutton" onclick="$('#customerModify').dialog('close')">Close</a>
    </div>
<script type="text/javascript">
//设置日期格式
$('#birthday').datebox({
    formatter: function(date)
    {
    	var year = date.getFullYear();
    	var month = date.getMonth()+1;
    	var day = date.getDate();
    	if(month < 10)
   		{
   			month = '0'+month;
   		}
    	if(day < 10)
    	{
    		day　= '0'+　day;
    	}
    	return year+'-'+month+'-'+day;
    },
    parser: function(date){ return new Date(Date.parse(date.replace(/-/g,"/")));}
});
function submitForm() {
	var json = formToJson('#customerForm');
	 var submitUrl = "__APP__/CustomerManage/Create";
	 if("" != $("#user_id").val())
	 {
		 submitUrl = "__APP__/CustomerManage/Modify";
	 }
	$.ajax({
		type:"post",
		url: submitUrl,
		data:json,
		dataType:"json",
		success:function(rsp){
			if(isSuccess(rsp)){
				//关闭当前对话框
				$('#customerModify').dialog('close');
				//重新加载datagrid数据
				$("#customerGrid").datagrid('reload'); 
			}
			else{
				fuegoAlert(rsp.errorMsg);
			}
		},
    	error:function(){
    		fuegoAlert("当前ajax操作出错！");
		}
	});
}
</script>
</body>
</html>